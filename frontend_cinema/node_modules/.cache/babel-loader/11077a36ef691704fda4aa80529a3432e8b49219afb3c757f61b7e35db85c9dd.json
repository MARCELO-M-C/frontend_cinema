{"ast":null,"code":"var _jsxFileName = \"D:\\\\OneDrive\\\\Documents\\\\Marcelo 2024 - 2025\\\\frontend_cinema\\\\frontend_cinema\\\\src\\\\pages\\\\comprar_boleto.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../styles/comprar_boleto.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ComprarBoleto() {\n  _s();\n  const [funciones, setFunciones] = useState([]);\n  const [funcionSeleccionada, setFuncionSeleccionada] = useState(null);\n  const [butacas, setButacas] = useState([]);\n  const [butacasSeleccionadas, setButacasSeleccionadas] = useState([]);\n  const [mostrarFormulario, setMostrarFormulario] = useState(false);\n  useEffect(() => {\n    fetch('http://localhost:3000/api/funciones').then(res => res.json()).then(data => {\n      if (Array.isArray(data)) {\n        setFunciones(data);\n      } else if (Array.isArray(data.funciones)) {\n        setFunciones(data.funciones);\n      } else {\n        console.error('Formato inesperado de respuesta:', data);\n      }\n    }).catch(err => console.error('Error cargando funciones', err));\n  }, []);\n  const cargarButacas = async funcionId => {\n    const funcion = funciones.find(f => f.id === parseInt(funcionId));\n    if (!funcion) return;\n    setFuncionSeleccionada(funcion);\n    setMostrarFormulario(false);\n    setButacasSeleccionadas([]);\n    const sala = funcion.sala;\n    const totalFilas = sala.filas;\n    const totalColumnas = sala.columnas;\n    const res = await fetch(`http://localhost:3000/api/reservas/todas`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      }\n    });\n    const data = await res.json();\n    const todasLasReservas = Array.isArray(data.reservas) ? data.reservas : [];\n    const reservadas = todasLasReservas.filter(r => r.funcion_id === funcion.id);\n    const nuevasButacas = [];\n    for (let fila = 0; fila < totalFilas; fila++) {\n      for (let columna = 0; columna < totalColumnas; columna++) {\n        const ocupada = reservadas.find(b => b.fila === fila && b.columna === columna);\n        nuevasButacas.push({\n          fila,\n          columna,\n          estado: ocupada ? 'reservado' : 'disponible'\n        });\n      }\n    }\n    setButacas(nuevasButacas);\n  };\n  const manejarSeleccion = (fila, columna) => {\n    const index = butacas.findIndex(b => b.fila === fila && b.columna === columna);\n    if (butacas[index].estado === 'reservado') return;\n    const actualizado = [...butacas];\n    if (actualizado[index].estado === 'disponible') {\n      actualizado[index].estado = 'seleccionado';\n      setButacasSeleccionadas([...butacasSeleccionadas, {\n        fila,\n        columna\n      }]);\n    } else {\n      actualizado[index].estado = 'disponible';\n      setButacasSeleccionadas(butacasSeleccionadas.filter(b => !(b.fila === fila && b.columna === columna)));\n    }\n    setButacas(actualizado);\n    setMostrarFormulario(actualizado.some(b => b.estado === 'seleccionado'));\n  };\n  const enviarFormulario = async e => {\n    e.preventDefault();\n    const res = await fetch('http://localhost:3000/api/reservas/multiples', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${localStorage.getItem('token')}`\n      },\n      body: JSON.stringify({\n        funcion_id: funcionSeleccionada.id,\n        butacas: butacasSeleccionadas\n      })\n    });\n    const data = await res.json();\n    if (res.ok) {\n      alert('Reservas completadas con éxito');\n      setFuncionSeleccionada(null);\n      setButacas([]);\n      setButacasSeleccionadas([]);\n      setMostrarFormulario(false);\n    } else {\n      alert(data.message || 'Error al reservar');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contenedor-compra\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Comprar Boleto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Selecciona una funci\\xF3n:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => cargarButacas(e.target.value),\n      defaultValue: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        disabled: true,\n        children: \"-- Elegir funci\\xF3n --\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), funciones.map(funcion => {\n        var _funcion$pelicula;\n        const fechaFormateada = new Date(funcion.fecha).toISOString().split('T')[0];\n        const titulo = ((_funcion$pelicula = funcion.pelicula) === null || _funcion$pelicula === void 0 ? void 0 : _funcion$pelicula.titulo) || 'Película';\n        return /*#__PURE__*/_jsxDEV(\"option\", {\n          value: funcion.id,\n          children: [titulo, \" - \", fechaFormateada, \" \", funcion.hora]\n        }, funcion.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), butacas.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"matriz-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pantalla\",\n        children: \"SCREEN\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-asientos\",\n        style: {\n          gridTemplateColumns: `repeat(${funcionSeleccionada.sala.columnas}, 40px)`\n        },\n        children: butacas.map((asiento, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `asiento ${asiento.estado}`,\n          title: `Fila ${asiento.fila + 1}, Columna ${asiento.columna + 1}`,\n          onClick: () => manejarSeleccion(asiento.fila, asiento.columna)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this), mostrarFormulario && /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"formulario-pago\",\n      onSubmit: enviarFormulario,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Simulaci\\xF3n de pago\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Butacas seleccionadas:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          readOnly: true,\n          value: butacasSeleccionadas.map(b => `F${b.fila + 1}-C${b.columna + 1}`).join(', ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Tarjeta:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"1234-5678-9012-3456\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Nombre:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Nombre completo\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Pagar y Reservar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(ComprarBoleto, \"fPs/tsXAYhvffnVa5QpKkF20uBU=\");\n_c = ComprarBoleto;\nexport default ComprarBoleto;\nvar _c;\n$RefreshReg$(_c, \"ComprarBoleto\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ComprarBoleto","_s","funciones","setFunciones","funcionSeleccionada","setFuncionSeleccionada","butacas","setButacas","butacasSeleccionadas","setButacasSeleccionadas","mostrarFormulario","setMostrarFormulario","fetch","then","res","json","data","Array","isArray","console","error","catch","err","cargarButacas","funcionId","funcion","find","f","id","parseInt","sala","totalFilas","filas","totalColumnas","columnas","headers","Authorization","localStorage","getItem","todasLasReservas","reservas","reservadas","filter","r","funcion_id","nuevasButacas","fila","columna","ocupada","b","push","estado","manejarSeleccion","index","findIndex","actualizado","some","enviarFormulario","e","preventDefault","method","body","JSON","stringify","ok","alert","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","value","defaultValue","disabled","map","_funcion$pelicula","fechaFormateada","Date","fecha","toISOString","split","titulo","pelicula","hora","length","style","gridTemplateColumns","asiento","title","onClick","onSubmit","type","readOnly","join","placeholder","required","_c","$RefreshReg$"],"sources":["D:/OneDrive/Documents/Marcelo 2024 - 2025/frontend_cinema/frontend_cinema/src/pages/comprar_boleto.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles/comprar_boleto.css';\r\n\r\nfunction ComprarBoleto() {\r\n  const [funciones, setFunciones] = useState([]);\r\n  const [funcionSeleccionada, setFuncionSeleccionada] = useState(null);\r\n  const [butacas, setButacas] = useState([]);\r\n  const [butacasSeleccionadas, setButacasSeleccionadas] = useState([]);\r\n  const [mostrarFormulario, setMostrarFormulario] = useState(false);\r\n\r\n  useEffect(() => {\r\n  fetch('http://localhost:3000/api/funciones')\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      if (Array.isArray(data)) {\r\n        setFunciones(data);\r\n      } else if (Array.isArray(data.funciones)) {\r\n        setFunciones(data.funciones);\r\n      } else {\r\n        console.error('Formato inesperado de respuesta:', data);\r\n      }\r\n    })\r\n    .catch(err => console.error('Error cargando funciones', err));\r\n}, []);\r\n\r\n  const cargarButacas = async (funcionId) => {\r\n    const funcion = funciones.find(f => f.id === parseInt(funcionId));\r\n    if (!funcion) return;\r\n\r\n    setFuncionSeleccionada(funcion);\r\n    setMostrarFormulario(false);\r\n    setButacasSeleccionadas([]);\r\n\r\n    const sala = funcion.sala;\r\n    const totalFilas = sala.filas;\r\n    const totalColumnas = sala.columnas;\r\n\r\n    const res = await fetch(`http://localhost:3000/api/reservas/todas`, {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem('token')}`\r\n      }\r\n    });\r\n    const data = await res.json();\r\n    const todasLasReservas = Array.isArray(data.reservas) ? data.reservas : [];\r\n\r\n    const reservadas = todasLasReservas.filter(\r\n      r => r.funcion_id === funcion.id\r\n    );\r\n\r\n    const nuevasButacas = [];\r\n    for (let fila = 0; fila < totalFilas; fila++) {\r\n      for (let columna = 0; columna < totalColumnas; columna++) {\r\n        const ocupada = reservadas.find(b => b.fila === fila && b.columna === columna);\r\n        nuevasButacas.push({\r\n          fila,\r\n          columna,\r\n          estado: ocupada ? 'reservado' : 'disponible'\r\n        });\r\n      }\r\n    }\r\n\r\n    setButacas(nuevasButacas);\r\n  };\r\n\r\n  const manejarSeleccion = (fila, columna) => {\r\n    const index = butacas.findIndex(b => b.fila === fila && b.columna === columna);\r\n    if (butacas[index].estado === 'reservado') return;\r\n\r\n    const actualizado = [...butacas];\r\n    if (actualizado[index].estado === 'disponible') {\r\n      actualizado[index].estado = 'seleccionado';\r\n      setButacasSeleccionadas([...butacasSeleccionadas, { fila, columna }]);\r\n    } else {\r\n      actualizado[index].estado = 'disponible';\r\n      setButacasSeleccionadas(butacasSeleccionadas.filter(\r\n        b => !(b.fila === fila && b.columna === columna)\r\n      ));\r\n    }\r\n\r\n    setButacas(actualizado);\r\n    setMostrarFormulario(actualizado.some(b => b.estado === 'seleccionado'));\r\n  };\r\n\r\n  const enviarFormulario = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const res = await fetch('http://localhost:3000/api/reservas/multiples', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${localStorage.getItem('token')}`\r\n      },\r\n      body: JSON.stringify({\r\n        funcion_id: funcionSeleccionada.id,\r\n        butacas: butacasSeleccionadas\r\n      })\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (res.ok) {\r\n      alert('Reservas completadas con éxito');\r\n      setFuncionSeleccionada(null);\r\n      setButacas([]);\r\n      setButacasSeleccionadas([]);\r\n      setMostrarFormulario(false);\r\n    } else {\r\n      alert(data.message || 'Error al reservar');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"contenedor-compra\">\r\n      <h2>Comprar Boleto</h2>\r\n\r\n      <label>Selecciona una función:</label>\r\n      <select onChange={(e) => cargarButacas(e.target.value)} defaultValue=\"\">\r\n        <option value=\"\" disabled>-- Elegir función --</option>\r\n        {funciones.map(funcion => {\r\n          const fechaFormateada = new Date(funcion.fecha).toISOString().split('T')[0];\r\n          const titulo = funcion.pelicula?.titulo || 'Película';\r\n          return (\r\n            <option key={funcion.id} value={funcion.id}>\r\n              {titulo} - {fechaFormateada} {funcion.hora}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n\r\n      {butacas.length > 0 && (\r\n        <div className=\"matriz-container\">\r\n          <div className=\"pantalla\">SCREEN</div>\r\n          <div\r\n            className=\"grid-asientos\"\r\n            style={{\r\n              gridTemplateColumns: `repeat(${funcionSeleccionada.sala.columnas}, 40px)`\r\n            }}\r\n          >\r\n            {butacas.map((asiento, index) => (\r\n              <div\r\n                key={index}\r\n                className={`asiento ${asiento.estado}`}\r\n                title={`Fila ${asiento.fila + 1}, Columna ${asiento.columna + 1}`}\r\n                onClick={() => manejarSeleccion(asiento.fila, asiento.columna)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {mostrarFormulario && (\r\n        <form className=\"formulario-pago\" onSubmit={enviarFormulario}>\r\n          <h3>Simulación de pago</h3>\r\n          <div>\r\n            <label>Butacas seleccionadas:</label>\r\n            <input\r\n              type=\"text\"\r\n              readOnly\r\n              value={butacasSeleccionadas\r\n                .map(b => `F${b.fila + 1}-C${b.columna + 1}`)\r\n                .join(', ')}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label>Tarjeta:</label>\r\n            <input type=\"text\" placeholder=\"1234-5678-9012-3456\" required />\r\n          </div>\r\n          <div>\r\n            <label>Nombre:</label>\r\n            <input type=\"text\" placeholder=\"Nombre completo\" required />\r\n          </div>\r\n          <button type=\"submit\">Pagar y Reservar</button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ComprarBoleto;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}